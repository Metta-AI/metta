# CVC Variant-Map Curriculum: Task Combinations

This document lists all task combinations generated by the `variant_maps` curriculum.

## Overview

The `variant_maps.train()` function creates a comprehensive curriculum with individual tasks for each combination of:
- **Map Size**: small (30x30), medium (50x50), large (70x70+)
- **Mission**: 3 missions per size = 9 total missions
- **Variant**: 4 behavioral variants

## Full Combinatorial Space

### Default Configuration (Small + Medium Maps)
**Total: 24 tasks** (6 missions × 4 variants)

#### Small Maps (3 missions × 4 variants = 12 tasks)

**Mission: extractor_hub_30**
1. `small_extractor_hub_30_lonely_heart`
2. `small_extractor_hub_30_heart_chorus`
3. `small_extractor_hub_30_pack_rat`
4. `small_extractor_hub_30_neutral_faced`

**Mission: collect_resources_classic**
5. `small_collect_resources_classic_lonely_heart`
6. `small_collect_resources_classic_heart_chorus`
7. `small_collect_resources_classic_pack_rat`
8. `small_collect_resources_classic_neutral_faced`

**Mission: oxygen_bottleneck**
9. `small_oxygen_bottleneck_lonely_heart`
10. `small_oxygen_bottleneck_heart_chorus`
11. `small_oxygen_bottleneck_pack_rat`
12. `small_oxygen_bottleneck_neutral_faced`

#### Medium Maps (3 missions × 4 variants = 12 tasks)

**Mission: extractor_hub_50**
13. `medium_extractor_hub_50_lonely_heart`
14. `medium_extractor_hub_50_heart_chorus`
15. `medium_extractor_hub_50_pack_rat`
16. `medium_extractor_hub_50_neutral_faced`

**Mission: collect_resources_spread**
17. `medium_collect_resources_spread_lonely_heart`
18. `medium_collect_resources_spread_heart_chorus`
19. `medium_collect_resources_spread_pack_rat`
20. `medium_collect_resources_spread_neutral_faced`

**Mission: energy_starved**
21. `medium_energy_starved_lonely_heart`
22. `medium_energy_starved_heart_chorus`
23. `medium_energy_starved_pack_rat`
24. `medium_energy_starved_neutral_faced`

### Full Configuration (All Maps)
**Total: 36 tasks** (9 missions × 4 variants) when `include_large_maps=True`

#### Large Maps (3 missions × 4 variants = 12 tasks)
*Requires `num_cogs=8`*

**Mission: extractor_hub_70**
25. `large_extractor_hub_70_lonely_heart`
26. `large_extractor_hub_70_heart_chorus`
27. `large_extractor_hub_70_pack_rat`
28. `large_extractor_hub_70_neutral_faced`

**Mission: collect_far**
29. `large_collect_far_lonely_heart`
30. `large_collect_far_heart_chorus`
31. `large_collect_far_pack_rat`
32. `large_collect_far_neutral_faced`

**Mission: divide_and_conquer**
33. `large_divide_and_conquer_lonely_heart`
34. `large_divide_and_conquer_heart_chorus`
35. `large_divide_and_conquer_pack_rat`
36. `large_divide_and_conquer_neutral_faced`

## Usage Examples

### Train on default (small + medium, all variants)
```bash
uv run ./tools/run.py experiments.recipes.cvc.variant_maps.train \\
    run=variant_maps num_cogs=4
```
Generates 24 tasks.

### Train on all maps
```bash
uv run ./tools/run.py experiments.recipes.cvc.variant_maps.train_all_variants_all_sizes \\
    run=all_maps num_cogs=8
```
Generates 36 tasks.

### Train on subset of variants
```bash
uv run ./tools/run.py experiments.recipes.cvc.variant_maps.train \\
    run=custom 'variants=["lonely_heart","heart_chorus"]'
```
Generates 12 tasks (6 missions × 2 variants).

### Train on specific map size
```bash
# Small maps only
uv run ./tools/run.py experiments.recipes.cvc.variant_maps.train \\
    run=small_only include_medium_maps=False

# Medium maps only
uv run ./tools/run.py experiments.recipes.cvc.variant_maps.train \\
    run=medium_only include_small_maps=False
```

## Curriculum Tracking

Each task is labeled with its full identifier (e.g., `small_extractor_hub_30_lonely_heart`), allowing the curriculum system to:

1. **Track learning progress** per task combination
2. **Sample adaptively** based on which map-variant combinations show highest learning progress
3. **Slice by dimensions**:
   - By map size: `small_*`, `medium_*`, `large_*`
   - By mission: `*_extractor_hub_30_*`, `*_oxygen_bottleneck_*`, etc.
   - By variant: `*_lonely_heart`, `*_heart_chorus`, etc.

## Variant Descriptions

- **lonely_heart**: Solo-focused behavior, tests independent efficiency
- **heart_chorus**: Cooperative behavior, rewards teamwork and coordination
- **pack_rat**: Resource hoarding, tests inventory management
- **neutral_faced**: Baseline/neutral behavior, control condition

## Implementation Details

See `experiments/recipes/cvc/variant_maps.py` for the `VariantMapTaskGenerator` implementation, which:
- Generates deterministic task lists based on included map sizes and variants
- Labels each task for curriculum tracking
- Supports flexible configuration of which combinations to include

