defaults:
  - /env/mettagrid/navigation/evals/defaults@
  - _self_

sampling: 1

game:
  num_agents: 4
  max_steps: 1000
  actions:
    attack:
      enabled: false
    swap:
      enabled: false
    change_color:
      enabled: false
    put_items:
      enabled: false

  map_builder:
    _target_: metta.mettagrid.room.multi_room.MultiRoom
    num_rooms: ${..num_agents}
    border_width: 6
    room:
      _target_: metta.map.mapgen.MapGen
      width: 50
      height: 50
      border_width: 1

      root:
        type: metta.map.scenes.room_grid.RoomGrid
        params:
          border_width: 0
          layout: [
            ["border", "border", "border", "border", "border"],
            ["border", "middle", "middle", "middle", "border"],
            ["border", "middle", "middle", "middle", "border"],
            ["border", "middle", "middle", "middle", "border"],
            ["border", "border", "border", "border", "border"]
          ]
        children:
          # This will be overridden by specific altar count configs
          - where:
              tags:
                - middle
            limit: 3
            lock: lock
            scene:
              type: metta.map.scenes.layout.Layout
              params:
                areas:
                  - width: 1
                    height: 1
                    placement: center
                    tag: altar_spot
              children:
                - where:
                    tags:
                      - altar_spot
                  scene:
                    type: metta.map.scenes.random.Random
                    params:
                      objects:
                        altar: 1

          # Place agent in random middle cell
          - where:
              tags:
                - middle
            limit: 1
            lock: lock
            scene:
              type: metta.map.scenes.random.Random
              params:
                agents: 1
