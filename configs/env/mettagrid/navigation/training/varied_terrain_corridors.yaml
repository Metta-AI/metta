# This YAML file configures the grid world environment using the VariedTerrainCorridors class.
# It adds corridor obstacles (long tubes composed of two parallel wall strings with an empty gap)
# that are drawn sequentially (connected) before placing the other obstacles.
# The number of heart altars is sampled between 50 and 100.

defaults:
  - ../../mettagrid@

sampling: 5

game:
  num_agents: 20
  map_builder:
    _target_: mettagrid.config.room.multi_room.MultiRoom
    num_rooms: 20
    border_width: 6

    room:
      # Target the VariedTerrainCorridors environment.
      _target_: mettagrid.config.room.varied_terrain_corridors.VariedTerrainCorridors
      width: ${uniform:60,80,1}        # Room width between 60 and 80.
      height: ${uniform:60,80,1}       # Room height between 60 and 80.
      border_width: ${uniform:1,6,3}
      agents: 1
      objects:
         altar: ${uniform:20,80,30}
         # Do not include "wall" here as obstacles are generated by dedicated parameters.
      
      # Parameters for obstacles:
      large_obstacles:
         size_range: [10, 25]       # Target block count range for large obstacles.
         count: ${uniform:10,20,1}    # Number of large obstacles between 10 and 20.
      small_obstacles:
         size_range: [3, 6]         # Target block count range for small obstacles.
         count: ${uniform:20,30,1}    # Number of small obstacles between 20 and 30.
      crosses:
         count: ${uniform:6,16,1}     # Number of cross obstacles between 6 and 16.
      hearts_count: ${uniform:50,100,1}  # Number of heart altars between 50 and 100.
      clumpiness: ${uniform:0,5,1}       # Clumpiness factor (0 = uniform, 5 = maximum clumping).
      
      # NEW: Parameters for corridors.
      corridors:
         width_range: [2,5]         # Gap between the two parallel wall strings.
         length_range: [5,20]         # Length of the wall strings.
         count: ${uniform:3,8,1}      # Number of corridors between 3 and 8.

  objects:
    altar:
      cooldown: ${uniform:1,250,1}  # Cooldown times for heart altars between 1 and 250.
      initial_items: 1

  actions:
    attack:
      enabled: true
    swap:
      enabled: true
    change_color:
      enabled: true