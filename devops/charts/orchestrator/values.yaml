orchestrator:
  enabled: true

replicaCount: 1

image:
  registry: 751442549699.dkr.ecr.us-east-1.amazonaws.com
  name: metta-policy-evaluator
  pullPolicy: Always
  tag: "latest"

serviceAccount:
  create: true
  annotations:
    eks.amazonaws.com/role-arn: arn:aws:iam::751442549699:role/orchestrator-eval-worker

env:
  BACKEND_URL: "https://api.observatory.softmax-research.net"
  CONTAINER_RUNTIME: "k8s"
  POLL_INTERVAL: "5"
  WORKER_IDLE_TIMEOUT: "1200"
  DD_TRACE_ENABLED: "true"

secrets:
  wandb: "wandb-api-secret"
  machineToken: "machine-token-secret"

resources:
  requests:
    cpu: 2500m
    memory: 16Gi
  limits:
    cpu: 4000m
    memory: 48Gi

# Datadog agent is deployed as a separate service
# This controls how the orchestrator connects to Datadog
datadog:
  enabled: true
  env: "production"

evalScheduler:
  enabled: true
  replicaCount: 1
  env:
    POLL_INTERVAL: "60"
    EVAL_GIT_HASH: "main"
    DD_TRACE_ENABLED: "true"
  resources:
    requests:
      cpu: 100m
      memory: 1Gi
    limits:
      cpu: 500m
      memory: 3Gi
  datadog:
    enabled: true
    env: "production"
    service: "leaderboard-eval-scheduler"

watcher:
  enabled: false
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi
