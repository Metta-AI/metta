# Phase 2: Exploitation with Medium Cost (Runs 121-200)
# Focus: Exploit promising regions found in Phase 1
# Goal: Refine best configurations with moderate compute

protein:
  acquisition_fn: ei # EI for balanced exploration-exploitation
  beta_ucb: 2.0 # Moderate exploration parameter
  xi_ei: 0.01 # Balanced exploration for EI
  num_random_samples: 5 # Minimal random - we have good priors now
  max_suggestion_cost: 3600 # 1 hour - medium cost
  expansion_rate: 0.15 # Moderate expansion
  global_search_scale: 0.8 # Tighter search around good points
  random_suggestions: 256 # Candidate pool for acquisition
  suggestions_per_pareto: 64 # More suggestions per good point
  seed_with_search_center: false # Use learned knowledge
  phase: 2 # Phase identifier for logging

metric: heart.gained # Total hearts gained
goal: maximize
method: bayes
max_observations_to_load: 250

parameters:
  trainer:
    # Same ranges as Phase 1 - only means change
    total_timesteps:
      distribution: int_uniform
      min: 100000000 # 100M - FIXED across all phases
      max: 5000000000 # 5B - FIXED across all phases
      mean: 1500000000 # 1.5B - bias toward medium cost
      scale: auto

    batch_size:
      distribution: uniform_pow2
      min: 65536 # 2^16 - FIXED across all phases
      max: 1048576 # 2^20 - FIXED across all phases
      mean: 262144 # 2^18 - bias toward moderate
      scale: auto

    optimizer:
      learning_rate:
        distribution: log_normal
        min: 1e-5 # FIXED across all phases
        max: 1e-2 # FIXED across all phases
        mean: 3e-4 # Standard bias - let optimizer learn
        scale: auto

    ppo:
      gamma:
        distribution: uniform
        min: 0.95 # FIXED across all phases
        max: 0.999 # FIXED across all phases
        mean: 0.99 # Standard bias - let optimizer learn
        scale: auto

      gae_lambda:
        distribution: uniform
        min: 0.85 # FIXED across all phases
        max: 0.99 # FIXED across all phases
        mean: 0.95 # Standard bias - let optimizer learn
        scale: auto

      clip_coef:
        distribution: uniform
        min: 0.05 # FIXED across all phases
        max: 0.4 # FIXED across all phases
        mean: 0.2 # Standard bias - let optimizer learn
        scale: auto

      ent_coef:
        distribution: log_normal
        min: 1e-4 # FIXED across all phases
        max: 1e-2 # FIXED across all phases
        mean: 1e-3 # Standard bias - let optimizer learn
        scale: auto
