# Phase 2: Exploitation with Medium Cost (Runs 81-160)
# Focus: Exploit promising regions found in Phase 1
# Goal: Refine best configurations with moderate compute

protein:
  num_random_samples: 5 # Minimal random - we have good priors now
  max_suggestion_cost: 3600 # 1 hour - medium cost
  expansion_rate: 0.15 # Moderate expansion
  resample_frequency: 5 # Frequent resampling from best configs
  global_search_scale: 0.8 # Tighter search around good points
  random_suggestions: 256
  suggestions_per_pareto: 128 # More suggestions per good point
  seed_with_search_center: false # Use learned knowledge

metric: heart.gained # Total hearts gained
goal: maximize
method: bayes
max_observations_to_load: 80 # Load Phase 1 results

parameters:
  trainer:
    # Medium timesteps for better signal
    total_timesteps:
      distribution: int_uniform
      min: 500000000 # 500M
      max: 1500000000 # 1.5B
      mean: 1000000000 # 1B
      scale: auto

    # Moderate batch sizes
    batch_size:
      distribution: uniform_pow2
      min: 131072 # 2^17
      max: 524288 # 2^19
      mean: 262144 # 2^18
      scale: auto

    minibatch_size:
      distribution: uniform_pow2
      min: 4096 # 2^12
      max: 16384 # 2^14
      mean: 8192 # 2^13
      scale: auto

    bptt_horizon:
      distribution: uniform_pow2
      min: 8 # 2^3
      max: 32 # 2^5
      mean: 16 # 2^4
      scale: auto

    # MODERATE narrowing - still allow exploration
    ppo:
      gamma:
        distribution: uniform # Keep uniform for phase 2
        min: 0.96
        max: 0.998
        mean: 0.99
        scale: auto

      gae_lambda:
        distribution: uniform
        min: 0.88
        max: 0.99
        mean: 0.95
        scale: auto

      clip_coef:
        distribution: uniform
        min: 0.08
        max: 0.35
        mean: 0.2
        scale: auto

      vf_coef:
        distribution: uniform
        min: 0.2
        max: 0.8
        mean: 0.5
        scale: auto

      vf_clip_coef:
        distribution: uniform
        min: 3.0
        max: 30.0
        mean: 10.0
        scale: auto

      ent_coef:
        distribution: log_normal
        min: 2e-4
        max: 8e-3
        mean: 1e-3
        scale: auto

    update_epochs:
      distribution: int_uniform
      min: 1
      max: 4
      mean: 3
      scale: auto

    optimizer:
      learning_rate:
        distribution: log_normal
        min: 8e-5
        max: 5e-3
        mean: 3e-4
        scale: auto

      beta1:
        distribution: uniform
        min: 0.82
        max: 0.95
        mean: 0.9
        scale: auto

      beta2:
        distribution: uniform
        min: 0.995
        max: 0.9999
        mean: 0.999
        scale: auto

      eps:
        distribution: log_normal
        min: 1e-9
        max: 1e-7
        mean: 1e-8
        scale: auto
