[build-system]
requires = ["scikit-build-core", "wheel", "numpy==2.2.5", "pybind11==2.10.4"]
build-backend = "scikit_build_core.build"

[project]
name = "mettagrid"
version = "0.1.6"
description = "A fast grid-based open-ended MARL environment"
authors = [{ name = "David Bloomin", email = "daveey@gmail.com" }]
requires-python = "==3.11.7"
license = "MIT"
readme = "README.md"
urls = { Homepage = "https://daveey.github.io", Repository = "https://github.com/Metta-AI/mettagrid" }
keywords = [
    "gridworld",
    "minigrid",
    "rl",
    "reinforcement-learning",
    "environment",
    "gym",
]
dependencies = [
    "aiofiles==24.1.0",
    "annotated-types==0.7.0",
    "anyio==4.9.0",
    "attrs==25.3.0",
    "boto3==1.38.23",
    "botocore==1.38.29",
    "cachetools==6.0.0",
    "cattrs==25.1.0",
    "certifi==2025.4.26",
    "cffi==1.17.1",
    "charset-normalizer==3.4.2",
    "click==8.2.1",
    "cloudpickle==3.1.1",
    "colorama==0.4.6",
    "contourpy==1.3.2",
    "coverage==7.8.2",
    "cpplint==2.0.2",
    "cryptography==45.0.3",
    "cycler==0.12.1",
    "docker-pycreds==0.4.0",
    "duckdb==1.2.0",
    "einops==0.8.1",
    "farama-notifications==0.0.4",
    "fastapi==0.115.5",
    "filelock==3.18.0",
    "fonttools==4.58.1",
    "fsspec==2025.5.1",
    "gitdb==4.0.12",
    "gitpython==3.1.44",
    "gym==0.25.2",
    "gym-notices==0.0.8",
    "gymnasium==1.1.1",
    "h11==0.16.0",
    "heavyball==1.7.2",
    "httpcore==1.0.9",
    "httptools==0.6.4",
    "httpx==0.28.1",
    "hydra-core==1.4.0.dev1",
    "idna==3.10",
    "imageio==2.37.0",
    "importlib-metadata==8.7.0",
    "iniconfig==2.1.0",
    "jinja2==3.1.6",
    "jmespath==1.0.1",
    "joblib==1.5.1",
    "jsonschema==4.24.0",
    "jsonschema-specifications==2025.4.1",
    "kiwisolver==1.4.8",
    "loguru==0.7.3",
    "markdown-it-py==3.0.0",
    "markupsafe==3.0.2",
    "matplotlib==3.10.3",
    "mdurl==0.1.2",
    "mpmath==1.3.0",
    "narwhals==1.41.0",
    "networkx==3.5",
    "nodeenv==1.9.1",
    "numpy==2.2.6",
    "omegaconf==2.4.0.dev3",
    "opencv-python==4.11.0.86",
    "opt-einsum==3.4.0",
    "orjson==3.10.18",
    "packaging==25.0",
    "pandas==2.2.3",
    "pendulum==3.1.0",
    "pettingzoo==1.25.0",
    "pillow==11.2.1",
    "pixie-python==4.3.0",
    "platformdirs==4.3.8",
    "plotly==6.1.1",
    "pluggy==1.6.0",
    "prettytable==3.16.0",
    "protobuf==6.31.1",
    "psutil==5.9.5",
    "pufferlib",
    "pulp==3.2.1",
    "py-cpuinfo==9.0.0",
    "pybind11==2.10.4",
    "pycparser==2.22",
    "pydantic==2.11.5",
    "pydantic-core==2.33.2",
    "pyglet==1.5.11",
    "pygments==2.19.1",
    "pynvml==11.5.3",
    "pyparsing==3.2.3",
    "pyright==1.1.401",
    "pyro-api==0.1.2",
    "pyro-ppl==1.9.1",
    "pytest==8.3.3",
    "pytest-benchmark==5.1.0",
    "pytest-cov==6.1.1",
    "python-dateutil==2.9.0.post0",
    "python-dotenv==1.1.0",
    "python-multipart==0.0.20",
    "pytz==2025.2",
    "pyyaml==6.0.2",
    "referencing==0.36.2",
    "requests==2.32.3",
    "rich==13.9.4",
    "rich-argparse==1.7.1",
    "rpds-py==0.25.1",
    "ruff==0.11.12",
    "s3transfer==0.13.0",
    "scikit-learn==1.6.1",
    "scipy==1.15.3",
    "seaborn==0.13.2",
    "sentry-sdk==2.29.1",
    "setproctitle==1.3.6",
    "setuptools==80.9.0",
    "shimmy==2.0.0",
    "six==1.17.0",
    "skypilot==0.9.2",
    "smmap==5.0.2",
    "sniffio==1.3.1",
    "starlette==0.41.3",
    "sympy==1.13.3",
    "tabulate==0.9.0",
    "tensordict==0.8.3",
    "termcolor==2.4.0",
    "threadpoolctl==3.6.0",
    "torch==2.7.0",
    "torchrl==0.8.1",
    "tqdm==4.67.1",
    "typing-extensions==4.14.0",
    "typing-inspection==0.4.1",
    "tzdata==2025.2",
    "urllib3==2.4.0",
    "uvicorn==0.34.2",
    "uvloop==0.21.0",
    "wandb==0.19.11",
    "watchfiles==1.0.5",
    "wcwidth==0.2.13",
    "websockets==15.0.1",
    "wheel==0.45.1",
    "zipp==3.22.0",
]

[tool.scikit-build]
# `release-no-tests` is faster than `release` preset.
# `pip install` builds are done in isolated environment, so tests and benchmarks are not built here.
# See `./README.md` for more details.
cmake.args = ["--preset", "release-no-tests"]

# Configuring pytest here causes us to ignore metta/conftest.py

[tool.pytest.ini_options]
testpaths = ["tests", "benchmarks"]
python_files = ["test_*.py"]
python_functions = ["test_*"]
python_classes = ["Test*"]

[tool.uv.sources]
pufferlib = { git = "https://github.com/relh/PufferLib.git", rev = "d3cde3f4107daaf8e195bf87f55742d7cd026ddb" }
