defaults:
  - common
  - wandb: metta_research
  - agent: fast
  - sim: sweep_eval
  - trainer: trainer
  - sweep: cogeval_sweep
  - _self_

cmd: sweep
sweep_run: ???

# Use default device (GPU if available)
# device: cpu  # Uncomment for CPU-only training

trainer:
  # Proper training configuration for cogeval sweep
  total_timesteps: 50_000_000_000  # 50B timesteps - will be overridden by sweep
  evaluate_interval: 300  # Evaluate every 300 epochs
  batch_size: 524288  # Large batch size - will be overridden by sweep
  minibatch_size: 16384  # Standard minibatch size - will be overridden by sweep
  checkpoint_interval: 60  # Checkpoint every 60 epochs
  wandb_checkpoint_interval: 300  # Upload to wandb every 300 epochs
  curriculum: /env/mettagrid/curriculum/simple
  forward_pass_minibatch_target_size: 4096  # Standard target size
  async_factor: 2  # Standard async factor
  env_overrides:
    game:
      max_steps: 1000  # Standard episode length - will be overridden by sweep
      num_agents: 16  # Standard agent count

sim:
  name: sweep_eval  # Required field
  num_episodes: 100  # Proper evaluation with 100 episodes
  max_time_s: 600  # 10 minutes for evaluation
  env_overrides: {}
  simulations:
    simple:
      env: env/mettagrid/simple

sweep_job:
  evals: ${sim}
  trainer: ${trainer}
  agent: ${agent}
  sweep: ${sweep}
  # device: cpu  # Uncomment for CPU-only training
  sweep_run: ???  # Sweep base name (e.g., "simple_sweep")

sweep_dir: "${.data_dir}/sweep/${.sweep_run}"
runs_dir: "${.sweep_dir}/runs"
