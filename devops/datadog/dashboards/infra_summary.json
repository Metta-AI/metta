{
  "title": "Metta Infra Health \u2013 Summary",
  "description": "Auto-generated summary view of workflow categories.",
  "layout_type": "ordered",
  "template_variables": [],
  "widgets": [
    {
      "definition": {
        "type": "query_value",
        "title": "Training summary",
        "title_size": "16",
        "title_align": "left",
        "precision": 0,
        "requests": [
          {
            "formulas": [
              {
                "formula": "if(sum(default_zero(fail_query1), default_zero(fail_query2), default_zero(fail_query3), default_zero(fail_query4), default_zero(fail_query5), default_zero(fail_query6), default_zero(fail_query7), default_zero(fail_query8), default_zero(fail_query9), default_zero(fail_query10)) > 0, sum(default_zero(fail_query1), default_zero(fail_query2), default_zero(fail_query3), default_zero(fail_query4), default_zero(fail_query5), default_zero(fail_query6), default_zero(fail_query7), default_zero(fail_query8), default_zero(fail_query9), default_zero(fail_query10)), 0)"
              }
            ],
            "queries": [
              {
                "name": "pass_query1",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.training.data_missing{status:pass}"
              },
              {
                "name": "fail_query1",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.training.data_missing{status:fail}"
              },
              {
                "name": "pass_query2",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.training.multigpu.runs_success{status:pass}"
              },
              {
                "name": "fail_query2",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.training.multigpu.runs_success{status:fail}"
              },
              {
                "name": "pass_query3",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.training.multigpu.hearts{status:pass}"
              },
              {
                "name": "fail_query3",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.training.multigpu.hearts{status:fail}"
              },
              {
                "name": "pass_query4",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.training.multigpu.sps{status:pass}"
              },
              {
                "name": "fail_query4",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.training.multigpu.sps{status:fail}"
              },
              {
                "name": "pass_query5",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.training.multinode.runs_success{status:pass}"
              },
              {
                "name": "fail_query5",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.training.multinode.runs_success{status:fail}"
              },
              {
                "name": "pass_query6",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.training.multinode.hearts{status:pass}"
              },
              {
                "name": "fail_query6",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.training.multinode.hearts{status:fail}"
              },
              {
                "name": "pass_query7",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.training.multinode.shaped{status:pass}"
              },
              {
                "name": "fail_query7",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.training.multinode.shaped{status:fail}"
              },
              {
                "name": "pass_query8",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.training.local_arena.first_checkpoint{status:pass}"
              },
              {
                "name": "fail_query8",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.training.local_arena.first_checkpoint{status:fail}"
              },
              {
                "name": "pass_query9",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.training.local_arena.continues{status:pass}"
              },
              {
                "name": "fail_query9",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.training.local_arena.continues{status:fail}"
              },
              {
                "name": "pass_query10",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.training.bugs.count{status:pass}"
              },
              {
                "name": "fail_query10",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.training.bugs.count{status:fail}"
              }
            ],
            "response_format": "scalar",
            "conditional_formats": [
              {
                "comparator": "<",
                "value": 1,
                "palette": "green_on_white"
              },
              {
                "comparator": ">=",
                "value": 1,
                "palette": "red_on_white"
              }
            ]
          }
        ],
        "autoscale": true,
        "time": {
          "live_span": "1h"
        }
      },
      "layout": {
        "x": 0,
        "y": 0,
        "width": 4,
        "height": 2
      }
    },
    {
      "definition": {
        "type": "query_value",
        "title": "CI summary",
        "title_size": "16",
        "title_align": "left",
        "precision": 0,
        "requests": [
          {
            "formulas": [
              {
                "formula": "if(sum(default_zero(fail_query1), default_zero(fail_query2), default_zero(fail_query3), default_zero(fail_query4), default_zero(fail_query5), default_zero(fail_query6), default_zero(fail_query7), default_zero(fail_query8), default_zero(fail_query9), default_zero(fail_query10)) > 0, sum(default_zero(fail_query1), default_zero(fail_query2), default_zero(fail_query3), default_zero(fail_query4), default_zero(fail_query5), default_zero(fail_query6), default_zero(fail_query7), default_zero(fail_query8), default_zero(fail_query9), default_zero(fail_query10)), 0)"
              }
            ],
            "queries": [
              {
                "name": "pass_query1",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.ci.workflow.tests_blocking_merge{status:pass}"
              },
              {
                "name": "fail_query1",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.ci.workflow.tests_blocking_merge{status:fail}"
              },
              {
                "name": "pass_query2",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.ci.workflow.benchmarks{status:pass}"
              },
              {
                "name": "fail_query2",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.ci.workflow.benchmarks{status:fail}"
              },
              {
                "name": "pass_query3",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.ci.workflow.other_failing{status:pass}"
              },
              {
                "name": "fail_query3",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.ci.workflow.other_failing{status:fail}"
              },
              {
                "name": "pass_query4",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.ci.workflow.success{status:pass}"
              },
              {
                "name": "fail_query4",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.ci.workflow.success{status:fail}"
              },
              {
                "name": "pass_query5",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.ci.workflow.flaky_tests{status:pass}"
              },
              {
                "name": "fail_query5",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.ci.workflow.flaky_tests{status:fail}"
              },
              {
                "name": "pass_query6",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.github.hotfix.count{status:pass}"
              },
              {
                "name": "fail_query6",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.github.hotfix.count{status:fail}"
              },
              {
                "name": "pass_query7",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.github.force_merge.count{status:pass}"
              },
              {
                "name": "fail_query7",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.github.force_merge.count{status:fail}"
              },
              {
                "name": "pass_query8",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.github.reverts.count{status:pass}"
              },
              {
                "name": "fail_query8",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.github.reverts.count{status:fail}"
              },
              {
                "name": "pass_query9",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.ci.workflow.duration.p90{status:pass}"
              },
              {
                "name": "fail_query9",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.ci.workflow.duration.p90{status:fail}"
              },
              {
                "name": "pass_query10",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.ci.workflow.cancelled{status:pass}"
              },
              {
                "name": "fail_query10",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.ci.workflow.cancelled{status:fail}"
              }
            ],
            "response_format": "scalar",
            "conditional_formats": [
              {
                "comparator": "<",
                "value": 1,
                "palette": "green_on_white"
              },
              {
                "comparator": ">=",
                "value": 1,
                "palette": "red_on_white"
              }
            ]
          }
        ],
        "autoscale": true,
        "time": {
          "live_span": "1h"
        }
      },
      "layout": {
        "x": 4,
        "y": 0,
        "width": 4,
        "height": 2
      }
    },
    {
      "definition": {
        "type": "query_value",
        "title": "Eval summary",
        "title_size": "16",
        "title_align": "left",
        "precision": 0,
        "requests": [
          {
            "formulas": [
              {
                "formula": "if(sum(default_zero(fail_query1), default_zero(fail_query2), default_zero(fail_query3), default_zero(fail_query4), default_zero(fail_query5), default_zero(fail_query6)) > 0, sum(default_zero(fail_query1), default_zero(fail_query2), default_zero(fail_query3), default_zero(fail_query4), default_zero(fail_query5), default_zero(fail_query6)), 0)"
              }
            ],
            "queries": [
              {
                "name": "pass_query1",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.eval.data_missing{status:pass}"
              },
              {
                "name": "fail_query1",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.eval.data_missing{status:fail}"
              },
              {
                "name": "pass_query2",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.eval.local.success{status:pass}"
              },
              {
                "name": "fail_query2",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.eval.local.success{status:fail}"
              },
              {
                "name": "pass_query3",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.eval.local.heart_delta_pct{status:pass}"
              },
              {
                "name": "fail_query3",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.eval.local.heart_delta_pct{status:fail}"
              },
              {
                "name": "pass_query4",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.eval.remote.success{status:pass}"
              },
              {
                "name": "fail_query4",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.eval.remote.success{status:fail}"
              },
              {
                "name": "pass_query5",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.eval.remote.heart_delta_pct{status:pass}"
              },
              {
                "name": "fail_query5",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.eval.remote.heart_delta_pct{status:fail}"
              },
              {
                "name": "pass_query6",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.eval.remote.duration_minutes{status:pass}"
              },
              {
                "name": "fail_query6",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.eval.remote.duration_minutes{status:fail}"
              }
            ],
            "response_format": "scalar",
            "conditional_formats": [
              {
                "comparator": "<",
                "value": 1,
                "palette": "green_on_white"
              },
              {
                "comparator": ">=",
                "value": 1,
                "palette": "red_on_white"
              }
            ]
          }
        ],
        "autoscale": true,
        "time": {
          "live_span": "1h"
        }
      },
      "layout": {
        "x": 8,
        "y": 0,
        "width": 4,
        "height": 2
      }
    }
  ]
}
