{
  "permissions": {
    "allow": [
      "Edit",
      "Write",
      "Bash(ls:*)",
      "Bash(find:*)",
      "Bash(mkdir:*)",
      "Bash(touch:*)",
      "Bash(grep:*)",
      "Bash(chmod:*)",
      "Bash(./build_with_bazel.sh:*)",
      "Bash(cat:*)",
      "Bash(pytest:*)",
      "Bash(./devops/test_uv_setup.sh:*)",
      "WebFetch(domain:docs.astral.sh)",
      "Bash(ruff check:*)",
      "Bash(metta configure:*)",
      "Bash(metta status:*)",
      "Bash(metta install:*)",
      "Bash(metta test:*)",
      "Bash(./install.sh:*)",
      "Bash(git status:*)",
      "Bash(git diff:*)",
      "Bash(git log:*)",
      "Bash(git branch)",
      "Bash(git branch --list:*)",
      "Bash(git branch -a)",
      "Bash(git branch -r)"
    ],
    "deny": []
  },
  "hooks": {
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": ".claude/hooks/session-start.sh"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "uv run --no-sync python -m metta.setup.tools.code_formatters --verbose --fix \"$CLAUDE_FILE_PATHS\""
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Before stopping, check: 1) Were there uncommitted code changes? If so, did Claude offer to commit or was the user informed? 2) If the user asked for multiple things, were they all addressed? 3) Are there obvious next steps Claude should mention? Return {\"decision\": \"approve\"} if complete, or {\"decision\": \"block\", \"reason\": \"...\"} with brief guidance."
          }
        ]
      }
    ]
  }
}
