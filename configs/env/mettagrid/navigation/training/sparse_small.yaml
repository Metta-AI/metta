defaults:
  - /env/mettagrid/mettagrid@
  - _self_

sampling: 1

game:
  max_steps: 250 # ${width * height} / 10
  num_agents: 4
  objects:
    altar:
      cooldown: 1000
      initial_resource_count: 1

  map_builder:
    _target_: metta.map.mapgen.MapGen
    # xcxc -- make this be a 2x2 grid of rooms
    width: ${sampling:20,50,30}
    height: ${sampling:20,50,30}
    border_width: 6

    root:
      type: metta.map.scenes.room_grid.RoomGrid
      params:
        layout: [
        ["border", "border", "border", "border", "border"],
        ["border", "middle", "middle", "middle", "border"],
        ["border", "middle", "middle", "middle", "border"],
        ["border", "middle", "middle", "middle", "border"],
        ["border", "border", "border", "border", "border"]
        ]
      children:
        - where:
            tags:
              - middle
          limit: 3
          lock: lock
          scene:
            type: metta.map.scenes.random.Random
            params:
              objects:
                altar: 1
        - where:
            tags:
              - middle
          limit: 4
          lock: lock
          scene:
            type: metta.map.scenes.random.Random
            params:
              agents: 1
