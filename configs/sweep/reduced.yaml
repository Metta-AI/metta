# Reduced parameter sweep configuration for effective Bayesian Optimization
# Limited to 8-10 most impactful parameters based on PPO sensitivity analysis

metric: reward
goal: maximize
method: bayes
max_observations_to_load: 250

protein:
  num_random_samples: 20
  max_suggestion_cost: 3600
  resample_frequency: 3
  global_search_scale: 1.0
  random_suggestions: 15
  suggestions_per_pareto: 32
  expansion_rate: 0.15
  seed_with_search_center: true
  # acquisition_fn: naive  # Options: naive (default), ei, ucb
  # ucb_beta: 2.0  # Only used when acquisition_fn is ucb
  randomize_acquisition: true # Randomize acquisition parameters for diversity in parallel runs

parameters:
  trainer:
    # CRITICAL PARAMETERS (Keep these - highest impact)

    total_timesteps:
      distribution: int_uniform
      min: 800000000 # 800M - just before first plateau jump at 900M
      max: 6000000000 # 6B - extended range for finding optimal convergence
      mean: 1500000000 # 1.5B - balanced starting point
      scale: auto

    optimizer:
      learning_rate:
        distribution: log_normal
        min: 1e-4
        max: 1e-2
        mean: 3e-4
        scale: auto

    batch_size:
      distribution: uniform_pow2
      min: 524288 # 2^19
      max: 2097152 # 2^21
      mean: 1048576 # 2^20
      scale: auto

    # HIGH IMPACT PPO PARAMETERS

    ppo:
      gamma: # Discount factor - critical for credit assignment
        distribution: logit_normal
        min: 0.95
        max: 0.999
        mean: 0.99
        scale: auto

      gae_lambda: # GAE parameter - affects variance/bias tradeoff
        distribution: logit_normal
        min: 0.9
        max: 0.99
        mean: 0.95
        scale: auto

      ent_coef: # Entropy coefficient - critical for exploration
        distribution: log_normal
        min: 5e-4
        max: 5e-3
        mean: 1e-3
        scale: auto

      clip_coef: # PPO clipping - core to the algorithm
        distribution: logit_normal
        min: 0.1
        max: 0.3
        mean: 0.2
        scale: auto

    # MODERATE IMPACT (Consider keeping 1-2 of these)

    minibatch_size: # Affects gradient noise
      distribution: uniform_pow2
      min: 2048 # 2^11
      max: 32768 # 2^15
      mean: 8192 # 2^13
      scale: auto

    # PARAMETERS TO FIX AT GOOD DEFAULTS:
    # - update_epochs: 3 (good default, low sensitivity)
    # - bptt_horizon: 16 (architecture dependent, not worth tuning)
    # - vf_coef: 0.5 (standard value works well)
    # - vf_clip_coef: 10.0 (rarely needs tuning)
    # - optimizer.beta1: 0.9 (Adam default is robust)
    # - optimizer.beta2: 0.999 (Adam default is robust)
    # - optimizer.eps: 1e-8 (negligible impact)
