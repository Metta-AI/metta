repositories:
- name: external-dns
  url: https://kubernetes-sigs.github.io/external-dns/
- name: cert-manager
  url: https://charts.jetstack.io

releases:
########## Core infrastructure ##########
- name: external-dns
  chart: external-dns/external-dns
  version: 1.17.0
  namespace: external-dns
  values:
  - env:
      - name: AWS_DEFAULT_REGION
        value: us-east-1
    serviceAccount:
      annotations:
        # created by terraform
        eks.amazonaws.com/role-arn: arn:aws:iam::751442549699:role/external-dns

- name: cert-manager
  chart: ./cert-manager
  version: v1.18.1
  namespace: cert-manager
  values:
  - installCRDs: true

########## Skypilot ##########
- name: skypilot
  chart: ./skypilot
  version: 0.0.6
  namespace: skypilot
  values:
  - apiService:
      config: |
        jobs:
          bucket: s3://skypilot-jobs/
    awsCredentials:
      enabled: true
    ingress:
      # created by terraform
      authSecret: skypilot-basic-auth
      certManager:
        clusterIssuer: letsencrypt
        enabled: true
      host: skypilot-api.softmax-research.net
    ingress-nginx:
      controller:
        service:
          annotations:
            service.beta.kubernetes.io/aws-load-balancer-scheme: internet-facing
    lambdaAiCredentials:
      enabled: true
      # created by terraform
      lambdaAiSecretName: lambda-ai-credentials
