# This host is used by scripts that authenticate with API tokens.
# Backend server will be mounted under /
host: api.observatory.softmax-research.net

image:
  registry: 751442549699.dkr.ecr.us-east-1.amazonaws.com
  name: metta-app-backend
  tag: "" # will be set by CI/CD pipeline

serviceAccount:
  create: true
  annotations:
    eks.amazonaws.com/role-arn: arn:aws:iam::751442549699:role/observatory-backend

# created by terraform
secret_name: observatory-backend-env

cert_manager_issuer: letsencrypt

replicaCount: 2

episodeRunnerImage:
  registry: 751442549699.dkr.ecr.us-east-1.amazonaws.com
  name: metta-policy-evaluator
  tag: latest

env:
  RUN_MIGRATIONS: "true"
  # Webhook service configuration (set via Helm extra_args in CI/CD):
  # USE_AWS_SECRETS: "true" (enables Secrets Manager access for webhook secrets)
  # ASANA_WORKSPACE_GID: (from GitHub Variables: vars.ASANA_WORKSPACE_GID)
  # ASANA_PROJECT_GID: (from GitHub Variables: vars.ASANA_PROJECT_GID)
  #
  # Required GitHub Variables (must be set in repository settings):
  # - vars.ASANA_WORKSPACE_GID: Asana workspace GID (not a secret)
  # - vars.ASANA_PROJECT_GID: Asana project GID for bugs (not a secret)
  #
  # Required AWS Secrets Manager secrets (accessed via IRSA):
  # - github/webhook-secret: GitHub webhook secret for signature verification
  # - asana/access-token or asana/api-key: Asana Personal Access Token
  # - asana/atlas_app: Asana OAuth app credentials (JSON with client_id/client_secret)
  # - github/token: GitHub token for PR description updates

secrets:
  machineToken: "machine-token-secret"
