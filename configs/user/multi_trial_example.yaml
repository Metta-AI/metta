# Example configuration demonstrating multi-trial tasks with trial reward tracking
# This configuration will create WandB plots showing average reward per trial number

defaults:
  - /common
  - /agent/fast
  - /trainer/trainer
  - /sim/all@evals
  - _self_

# Basic run configuration
run: multi_trial_example
cmd: train

data_dir: ${oc.env:DATA_DIR,./train_dir}
run_dir: ${data_dir}/${run}

trainer:
  curriculum: /env/mettagrid/curriculum/navigation/bucketed
  num_workers: 4
  simulation:
    evaluate_interval: 100
  checkpoint:
    wandb_checkpoint_interval: 100
  total_timesteps: 10_000_000 # Shorter run for testing

# Environment overrides to enable multi-trial
env_overrides:
  game:
    num_trials: 5 # This will create 5 trials per episode
    max_steps: 200 # Each trial can last up to 200 steps

# WandB configuration
wandb:
  enabled: true
  project: metta
  entity: metta-research
  group: ${run}
  name: ${run}
  run_id: ${run}
  data_dir: ${run_dir}
  job_type: ${cmd}
  tags: ["multi_trial", "trial_reward_tracking"]
# This configuration will create the following WandB metrics:
# - trial_1_reward: Reward for trial 1
# - trial_2_reward: Reward for trial 2
# - trial_3_reward: Reward for trial 3
# - trial_4_reward: Reward for trial 4
# - trial_5_reward: Reward for trial 5
#
# To create the desired plot in WandB:
# 1. Create a custom plot
# 2. Set X-axis to "trial_*_reward" metrics
# 3. This will show trial number (1,2,3,4,5) on x-axis and average reward on y-axis
