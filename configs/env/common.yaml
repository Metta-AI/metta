# Complete MettaGridEnv configuration
# This file contains all necessary fields for creating a MettaGridEnv
# without relying on Hydra's defaults mechanism

# Top-level environment settings
sampling: 0
desync_episodes: false
replay_level_prob: 0.2

# Game configuration
game:
  # Basic game parameters
  num_agents: 24
  obs_width: 11
  obs_height: 11
  num_observation_tokens: 200
  max_steps: 1000

  # Diversity bonus settings (used by MettaGridEnv but not by GameConfig)
  diversity_bonus:
    enabled: false
    similarity_coef: 0.5  # Coefficient for within-group similarity
    diversity_coef: 0.5   # Coefficient for between-group diversity

  # Default agent configuration
  agent:
    default_item_max: 50
    heart_max: 255  # Agents can pick up many hearts
    freeze_duration: 10
    rewards:
      action_failure_penalty: 0
      # Ore rewards
      ore.red: 0.005
      ore.blue: 0.005
      ore.green: 0.005
      ore.red_max: 4
      ore.blue_max: 4
      ore.green_max: 4
      # Battery rewards
      battery.red: 0.01
      battery.blue: 0.01
      battery.green: 0.01
      battery.red_max: 5
      battery.blue_max: 5
      battery.green_max: 5
      # Heart rewards
      heart: 1
      heart_max: 1000

  # Agent groups configuration
  groups:
    # Base agent group (required)
    agent:
      id: 0
      sprite: 0
      props: {}

    # Team groups
    team_1:
      id: 1
      sprite: 1
      group_reward_pct: 0.5
      props: {}

    team_2:
      id: 2
      sprite: 4
      group_reward_pct: 0.5
      props: {}

    team_3:
      id: 3
      sprite: 8
      group_reward_pct: 0.5
      props: {}

    team_4:
      id: 4
      sprite: 1
      group_reward_pct: 0.5
      props: {}

    # Special groups
    prey:
      id: 5
      sprite: 12
      props: {}

    predator:
      id: 6
      sprite: 6
      props: {}

  # Object definitions
  objects:
    # Converter objects
    altar:
      input_battery.red: 3
      output_heart: 1
      max_output: 5
      conversion_ticks: 1
      cooldown: 10
      initial_items: 1

    # Mine objects (produce ore)
    mine_red:
      output_ore.red: 1
      color: 0
      max_output: 5
      conversion_ticks: 1
      cooldown: 50
      initial_items: 1

    mine_blue:
      color: 1
      output_ore.blue: 1
      max_output: 5
      conversion_ticks: 1
      cooldown: 50
      initial_items: 1

    mine_green:
      output_ore.green: 1
      color: 2
      max_output: 5
      conversion_ticks: 1
      cooldown: 50
      initial_items: 1

    # Generator objects (convert ore to batteries)
    generator_red:
      input_ore.red: 1
      output_battery.red: 1
      color: 0
      max_output: 5
      conversion_ticks: 1
      cooldown: 25
      initial_items: 1

    generator_blue:
      input_ore.blue: 1
      output_battery.blue: 1
      color: 1
      max_output: 5
      conversion_ticks: 1
      cooldown: 25
      initial_items: 1

    generator_green:
      input_ore.green: 1
      output_battery.green: 1
      color: 2
      max_output: 5
      conversion_ticks: 1
      cooldown: 25
      initial_items: 1

    # Advanced converter objects
    armory:
      input_ore.red: 3
      output_armor: 1
      max_output: 5
      conversion_ticks: 1
      cooldown: 10
      initial_items: 1

    lasery:
      input_ore.red: 1
      input_battery.red: 2
      output_laser: 1
      max_output: 5
      conversion_ticks: 1
      cooldown: 10
      initial_items: 1

    lab:
      input_ore.red: 3
      input_battery.red: 3
      output_blueprint: 1
      max_output: 5
      conversion_ticks: 1
      cooldown: 5
      initial_items: 1

    factory:
      input_blueprint: 1
      input_ore.red: 5
      input_battery.red: 5
      output_armor: 5
      output_laser: 5
      max_output: 5
      conversion_ticks: 1
      cooldown: 5
      initial_items: 1

    temple:
      input_heart: 1
      input_blueprint: 1
      output_heart: 5
      max_output: 5
      conversion_ticks: 1
      cooldown: 5
      initial_items: 1

    # Static objects
    wall:
      swappable: false

    block:
      swappable: true

  # Action configuration
  actions:
    noop:
      enabled: true
    move:
      enabled: true
    rotate:
      enabled: true
    put_items:
      enabled: true
    get_items:
      enabled: true
    attack:
      enabled: true
    swap:
      enabled: true
    change_color:
      enabled: true

  # Reward sharing configuration
  reward_sharing:
    groups:
      team_1:
        team_1: 0.5
      team_2:
        team_2: 0.5
      team_3:
        team_3: 0.5
      team_4:
        team_4: 0.5

  # Map builder configuration (used by MettaGridEnv)
  map_builder:
    _target_: metta.mettagrid.room.multi_room.MultiRoom
    num_rooms: 4  # 24 agents / 6 per room
    border_width: 6

    room:
      _target_: metta.mettagrid.room.random.Random
      width: 25   # Fixed size instead of ${sampling:10,100,25}
      height: 25  # Fixed size instead of ${sampling:10,100,25}
      border_width: 0
      agents: 6

      objects:
        # Mine objects (using generic names that map to colored versions)
        mine: 10
        generator: 2
        altar: 1
        armory: 1
        lasery: 1
        lab: 1
        factory: 1
        temple: 1

        # Static objects
        block: 20
        wall: 20
