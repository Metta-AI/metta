name: "Sync PR Description (Asana to GH)"
description: "Updates a GitHub pull request description with a link to an Asana task."

inputs:
  pr_number:
    description: "The number of the pull request."
    required: true
  repo:
    description: "The repository (e.g., owner/repo)."
    required: true
  token:
    description: "GitHub token for authentication."
    required: true
  task_url:
    description: "The Asana task URL to add to the PR description."
    required: true

runs:
  using: "composite"
  steps:
    - name: Setup Environment
      uses: ./.github/actions/setup-environment
      with:
        install-mode: minimal
        extra-dependencies: requests>=2.31.0

    - run: uv run ${{ github.action_path }}/pr_description_asana_to_gh.py
      shell: bash
      env:
        INPUT_REPO: ${{ inputs.repo }}
        INPUT_PR_NUMBER: ${{ inputs.pr_number }}
        INPUT_TASK_URL: ${{ inputs.task_url }}
        INPUT_TOKEN: ${{ inputs.token }}
