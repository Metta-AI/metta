# @package __global__

# Progressive Performance-Based Curriculum Training Configuration
# Uses the new logistic-blended, performance-based progression curriculum

defaults:
  - /trainer/trainer
  - /sim/all@evals  # Use navigation-only evaluation suite
  - _self_

# Basic run configuration
#run: ${oc.env:USER}.lp_cric
data_dir: ${oc.env:DATA_DIR,./train_dir}
run_dir: ${data_dir}/${run}

trainer:
  curriculum:
    _target_: metta.mettagrid.curriculum.progressive.ProgressiveMultiTaskCurriculum
    tasks:
      /env/mettagrid/curriculum/navigation: 1
      /env/mettagrid/curriculum/object_use: 1
      /env/mettagrid/curriculum/memory: 1
    performance_threshold: 0.8
    smoothing: 0.1
    progression_increment: 0.01
    progression_rate: 0.00001
    progression_mode: "perf"
    blending_mode: "logistic"
    blending_smoothness: 1.0
    transition_width: 0.5
    initial_skew: 5.0
  evaluate_interval: 100
  #total_timesteps: 1000000
  #gamma: 0.99
  #gae_lambda: 0.95
  #vf_coef: 0.5
  #ent_coef: 0.01
  #batch_size: 512
  #minibatch_size: 256
  #bptt_horizon: 8
  #learning_rate: 3e-4
  num_workers: 4

wandb:
  enabled: true
  project: metta
  entity: metta-research
  name: ${run}
  tags: ["msb_progressive_curriculum"]
