hydra:
  callbacks:
    resolver_callback:
      _target_: metta.common.util.resolvers.ResolverRegistrar

run: ???
dist_cfg_path: null

# We override DATA_DIR when running on skypilot.
# This is because we mount train_dir with S3 and uv gets slow when it tries to scan it.
data_dir: ${oc.env:DATA_DIR,./train_dir}

run_dir: ${data_dir}/${run}
policy_uri: file://${run_dir}/checkpoints

torch_deterministic: true
seed: 0

device: cuda
vectorization: multiprocessing

stats_server_uri: https://api.observatory.softmax-research.net

# Performance environment variables
env_vars:
  # PyTorch optimizations
  TORCH_CUDNN_V8_API_ENABLED: "1"
  TORCH_CUDNN_BENCHMARK: "1"
  CUDA_LAUNCH_BLOCKING: "0"
  
  # Memory optimizations
  PYTORCH_CUDA_ALLOC_CONF: "max_split_size_mb:128,garbage_collection_threshold:0.8"
  
  # CPU optimizations
  OMP_NUM_THREADS: "4"
  MKL_NUM_THREADS: "4"
  OPENBLAS_NUM_THREADS: "4"
  
  # Distributed training optimizations
  NCCL_ASYNC_ERROR_HANDLING: "1"
  NCCL_TREE_THRESHOLD: "0"
