<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkyDeck Dashboard</title>
    <link rel="stylesheet" href="/static/styles.css?v=27">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-right">
                <div class="health-status" id="health-status">
                    <span class="status-indicator" id="status-indicator"></span>
                    <span id="status-text">Loading...</span>
                </div>
            </div>
        </header>

        <section id="experiments-section">
            <div class="table-wrapper">
                <table id="experiments-table">
                    <thead id="experiments-thead">
                        <tr>
                            <th class="col-expand"><span style="display: inline-block; cursor: pointer; padding: 2px 6px; border-radius: 3px; background-color: transparent; border: 2px solid #4CAF50; color: #4CAF50; font-size: 10px; font-weight: bold;" onclick="quickCreateExperiment()" title="Create new experiment">+</span></th>
                            <th class="col-id">
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <span>ID</span>
                                    <div class="bulk-actions" id="bulk-actions" style="display: none;">
                                        <button onclick="bulkStart()" class="btn-pill btn-pill-primary">Start</button>
                                        <button onclick="bulkStop()" class="btn-pill">Stop</button>
                                        <button onclick="bulkDuplicate()" class="btn-pill">Duplicate</button>
                                        <button onclick="bulkDelete()" class="btn-pill btn-pill-danger">Delete</button>
                                    </div>
                                </div>
                            </th>
                            <th class="col-name">Name</th>
                            <th class="col-state">State</th>
                            <th class="col-epoch">Epoch</th>
                            <th class="col-cluster">Cluster</th>
                            <!-- Dynamic flag columns added here -->
                            <th class="col-resources">Resources</th>
                            <th class="col-actions">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="experiments-tbody">
                        <tr>
                            <td colspan="100" class="loading">Loading experiments...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <section id="jobs-section">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <h2 style="margin: 0;">SkyPilot Jobs</h2>
                <div style="display: flex; gap: 15px; align-items: center;">
                    <label style="display: flex; align-items: center; gap: 5px; font-size: 13px;">
                        Filter:
                        <input type="text" id="jobs-filter" placeholder="Search..."
                               style="width: 150px; padding: 4px;" oninput="filterJobs(this.value)">
                    </label>
                    <label style="display: flex; align-items: center; gap: 5px; font-size: 13px;">
                        <input type="checkbox" id="filter-my-jobs" checked onchange="toggleMyJobsFilter(this.checked)">
                        My Jobs
                    </label>
                    <label style="display: flex; align-items: center; gap: 5px; font-size: 13px;">
                        <input type="checkbox" id="filter-stopped" onchange="toggleStoppedFilter(this.checked)">
                        Show Stopped
                    </label>
                    <label style="display: flex; align-items: center; gap: 5px; font-size: 13px;">
                        <input type="checkbox" id="filter-orphaned" onchange="toggleOrphanedFilter(this.checked)">
                        Orphaned Only
                    </label>
                    <label style="display: flex; align-items: center; gap: 5px; font-size: 13px;">
                        Limit:
                        <input type="number" id="jobs-limit" value="20" min="1" max="1000"
                               style="width: 60px; padding: 4px;" onchange="updateJobsLimit(this.value)">
                    </label>
                </div>
            </div>
            <div class="table-wrapper">
                <table id="jobs-table">
                    <thead>
                        <tr>
                            <th class="col-expand"></th>
                            <th class="col-checkbox"><input type="checkbox" id="select-all-jobs" onchange="toggleSelectAllJobs(this.checked)"></th>
                            <th>Job ID</th>
                            <th>Name</th>
                            <th>Status</th>
                            <th>Resources</th>
                            <th>Duration</th>
                            <th>Started</th>
                            <th class="col-scrollbar"></th>
                        </tr>
                    </thead>
                    <tbody id="jobs-tbody">
                        <tr>
                            <td colspan="9" class="loading">Loading jobs...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>
    </div>

    <!-- Notification Container -->
    <div id="notification-container" class="notification-container"></div>

    <script src="/static/app.js?v=79"></script>
</body>
</html>
