{
  "title": "Metta Infra Health \u2013 Detailed",
  "description": "Auto-generated detailed view for all workflows and metrics.",
  "layout_type": "ordered",
  "template_variables": [],
  "widgets": [
    {
      "definition": {
        "type": "timeseries",
        "title": "Training \u2014 Training data availability \u2014 Data availability \u2014 S3 data found (Condition: < 1)",
        "requests": [
          {
            "display_type": "line",
            "formulas": [
              {
                "formula": "query1"
              }
            ],
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.training.data_missing{*}"
              }
            ],
            "response_format": "timeseries",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "markers": [
          {
            "label": "pass boundary",
            "value": "< 1",
            "display_type": "ok"
          }
        ],
        "show_legend": false
      },
      "layout": {
        "x": 0,
        "y": 0,
        "width": 6,
        "height": 4
      }
    },
    {
      "definition": {
        "type": "timeseries",
        "title": "Training \u2014 Multigpu arena basic easy shaped \u2014 Runs successfully \u2014 Binary success (Condition: >= 1)",
        "requests": [
          {
            "display_type": "line",
            "formulas": [
              {
                "formula": "query1"
              }
            ],
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.training.multigpu.runs_success{*}"
              }
            ],
            "response_format": "timeseries",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "markers": [
          {
            "label": "pass boundary",
            "value": ">= 1",
            "display_type": "ok"
          }
        ],
        "show_legend": false
      },
      "layout": {
        "x": 6,
        "y": 0,
        "width": 6,
        "height": 4
      }
    },
    {
      "definition": {
        "type": "timeseries",
        "title": "Training \u2014 Multigpu arena basic easy shaped \u2014 Hearts \u2014 Avg hearts (Condition: >= 0.5)",
        "requests": [
          {
            "display_type": "line",
            "formulas": [
              {
                "formula": "query1"
              }
            ],
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.training.multigpu.hearts{*}"
              }
            ],
            "response_format": "timeseries",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "markers": [
          {
            "label": "pass boundary",
            "value": ">= 0.5",
            "display_type": "ok"
          }
        ],
        "show_legend": false
      },
      "layout": {
        "x": 0,
        "y": 4,
        "width": 6,
        "height": 4
      }
    },
    {
      "definition": {
        "type": "timeseries",
        "title": "Training \u2014 Multigpu arena basic easy shaped \u2014 SPS \u2014 Steps per second (Condition: >= 40000)",
        "requests": [
          {
            "display_type": "line",
            "formulas": [
              {
                "formula": "query1"
              }
            ],
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.training.multigpu.sps{*}"
              }
            ],
            "response_format": "timeseries",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "markers": [
          {
            "label": "pass boundary",
            "value": ">= 40000",
            "display_type": "ok"
          }
        ],
        "show_legend": false
      },
      "layout": {
        "x": 6,
        "y": 4,
        "width": 6,
        "height": 4
      }
    },
    {
      "definition": {
        "type": "timeseries",
        "title": "Training \u2014 Multinode learning progress \u2014 Runs successfully \u2014 Binary success (Condition: >= 1)",
        "requests": [
          {
            "display_type": "line",
            "formulas": [
              {
                "formula": "query1"
              }
            ],
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.training.multinode.runs_success{*}"
              }
            ],
            "response_format": "timeseries",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "markers": [
          {
            "label": "pass boundary",
            "value": ">= 1",
            "display_type": "ok"
          }
        ],
        "show_legend": false
      },
      "layout": {
        "x": 0,
        "y": 8,
        "width": 6,
        "height": 4
      }
    },
    {
      "definition": {
        "type": "timeseries",
        "title": "Training \u2014 Multinode learning progress \u2014 Hearts \u2014 Avg hearts (Condition: >= 0.5)",
        "requests": [
          {
            "display_type": "line",
            "formulas": [
              {
                "formula": "query1"
              }
            ],
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.training.multinode.hearts{*}"
              }
            ],
            "response_format": "timeseries",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "markers": [
          {
            "label": "pass boundary",
            "value": ">= 0.5",
            "display_type": "ok"
          }
        ],
        "show_legend": false
      },
      "layout": {
        "x": 6,
        "y": 8,
        "width": 6,
        "height": 4
      }
    },
    {
      "definition": {
        "type": "timeseries",
        "title": "Training \u2014 Multinode learning progress \u2014 Shaped \u2014 Shaped SPS (Condition: >= 40000)",
        "requests": [
          {
            "display_type": "line",
            "formulas": [
              {
                "formula": "query1"
              }
            ],
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.training.multinode.shaped{*}"
              }
            ],
            "response_format": "timeseries",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "markers": [
          {
            "label": "pass boundary",
            "value": ">= 40000",
            "display_type": "ok"
          }
        ],
        "show_legend": false
      },
      "layout": {
        "x": 0,
        "y": 12,
        "width": 6,
        "height": 4
      }
    },
    {
      "definition": {
        "type": "timeseries",
        "title": "Training \u2014 Local arena basic easy shaped \u2014 Runs to first checkpoint \u2014 Binary success (Condition: >= 1)",
        "requests": [
          {
            "display_type": "line",
            "formulas": [
              {
                "formula": "query1"
              }
            ],
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.training.local_arena.first_checkpoint{*}"
              }
            ],
            "response_format": "timeseries",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "markers": [
          {
            "label": "pass boundary",
            "value": ">= 1",
            "display_type": "ok"
          }
        ],
        "show_legend": false
      },
      "layout": {
        "x": 6,
        "y": 12,
        "width": 6,
        "height": 4
      }
    },
    {
      "definition": {
        "type": "timeseries",
        "title": "Training \u2014 Local arena basic easy shaped \u2014 Continues from checkpoint \u2014 Binary success (Condition: >= 1)",
        "requests": [
          {
            "display_type": "line",
            "formulas": [
              {
                "formula": "query1"
              }
            ],
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.training.local_arena.continues{*}"
              }
            ],
            "response_format": "timeseries",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "markers": [
          {
            "label": "pass boundary",
            "value": ">= 1",
            "display_type": "ok"
          }
        ],
        "show_legend": false
      },
      "layout": {
        "x": 0,
        "y": 16,
        "width": 6,
        "height": 4
      }
    },
    {
      "definition": {
        "type": "timeseries",
        "title": "Training \u2014 Bugs \u2014 Bugs tickets \u2014 Count (Condition: < 1)",
        "requests": [
          {
            "display_type": "line",
            "formulas": [
              {
                "formula": "query1"
              }
            ],
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.training.bugs.count{*}"
              }
            ],
            "response_format": "timeseries",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "markers": [
          {
            "label": "pass boundary",
            "value": "< 1",
            "display_type": "ok"
          }
        ],
        "show_legend": false
      },
      "layout": {
        "x": 6,
        "y": 16,
        "width": 6,
        "height": 4
      }
    },
    {
      "definition": {
        "type": "timeseries",
        "title": "CI \u2014 Latest state of main \u2014 Tests that block merge passing \u2014 Workflow passing signal (Condition: >= 1)",
        "requests": [
          {
            "display_type": "line",
            "formulas": [
              {
                "formula": "query1"
              }
            ],
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.ci.workflow.tests_blocking_merge{*}"
              }
            ],
            "response_format": "timeseries",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "markers": [
          {
            "label": "pass boundary",
            "value": ">= 1",
            "display_type": "ok"
          }
        ],
        "show_legend": false
      },
      "layout": {
        "x": 0,
        "y": 20,
        "width": 6,
        "height": 4
      }
    },
    {
      "definition": {
        "type": "timeseries",
        "title": "CI \u2014 Latest state of main \u2014 Benchmarks passing \u2014 Workflow passing signal (Condition: >= 1)",
        "requests": [
          {
            "display_type": "line",
            "formulas": [
              {
                "formula": "query1"
              }
            ],
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.ci.workflow.benchmarks{*}"
              }
            ],
            "response_format": "timeseries",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "markers": [
          {
            "label": "pass boundary",
            "value": ">= 1",
            "display_type": "ok"
          }
        ],
        "show_legend": false
      },
      "layout": {
        "x": 6,
        "y": 20,
        "width": 6,
        "height": 4
      }
    },
    {
      "definition": {
        "type": "timeseries",
        "title": "CI \u2014 Latest state of main \u2014 Other workflows failing \u2014 Count of failing workflows (Condition: < 2)",
        "requests": [
          {
            "display_type": "line",
            "formulas": [
              {
                "formula": "query1"
              }
            ],
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.ci.workflow.other_failing{*}"
              }
            ],
            "response_format": "timeseries",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "markers": [
          {
            "label": "pass boundary",
            "value": "< 2",
            "display_type": "ok"
          }
        ],
        "show_legend": false
      },
      "layout": {
        "x": 0,
        "y": 24,
        "width": 6,
        "height": 4
      }
    },
    {
      "definition": {
        "type": "timeseries",
        "title": "CI \u2014 Latest state of main \u2014 Latest state success ratio \u2014 Binary success signal (Condition: >= 1)",
        "requests": [
          {
            "display_type": "line",
            "formulas": [
              {
                "formula": "query1"
              }
            ],
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.ci.workflow.success{*}"
              }
            ],
            "response_format": "timeseries",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "markers": [
          {
            "label": "pass boundary",
            "value": ">= 1",
            "display_type": "ok"
          }
        ],
        "show_legend": false
      },
      "layout": {
        "x": 6,
        "y": 24,
        "width": 6,
        "height": 4
      }
    },
    {
      "definition": {
        "type": "timeseries",
        "title": "CI \u2014 Latest state of main \u2014 Flaky reruns per window \u2014 Count of reruns (Condition: < 10)",
        "requests": [
          {
            "display_type": "line",
            "formulas": [
              {
                "formula": "query1"
              }
            ],
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.ci.workflow.flaky_tests{*}"
              }
            ],
            "response_format": "timeseries",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "markers": [
          {
            "label": "pass boundary",
            "value": "< 10",
            "display_type": "ok"
          }
        ],
        "show_legend": false
      },
      "layout": {
        "x": 0,
        "y": 28,
        "width": 6,
        "height": 4
      }
    },
    {
      "definition": {
        "type": "timeseries",
        "title": "CI \u2014 Commit history \u2014 Weekly hotfix commits \u2014 Hotfix count (Condition: < 5)",
        "requests": [
          {
            "display_type": "line",
            "formulas": [
              {
                "formula": "query1"
              }
            ],
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.github.hotfix.count{*}"
              }
            ],
            "response_format": "timeseries",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "markers": [
          {
            "label": "pass boundary",
            "value": "< 5",
            "display_type": "ok"
          }
        ],
        "show_legend": false
      },
      "layout": {
        "x": 6,
        "y": 28,
        "width": 6,
        "height": 4
      }
    },
    {
      "definition": {
        "type": "timeseries",
        "title": "CI \u2014 Commit history \u2014 Weekly force merges \u2014 Force merge count (Condition: < 7)",
        "requests": [
          {
            "display_type": "line",
            "formulas": [
              {
                "formula": "query1"
              }
            ],
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.github.force_merge.count{*}"
              }
            ],
            "response_format": "timeseries",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "markers": [
          {
            "label": "pass boundary",
            "value": "< 7",
            "display_type": "ok"
          }
        ],
        "show_legend": false
      },
      "layout": {
        "x": 0,
        "y": 32,
        "width": 6,
        "height": 4
      }
    },
    {
      "definition": {
        "type": "timeseries",
        "title": "CI \u2014 Commit history \u2014 Weekly reverts \u2014 Revert count (Condition: <= 1)",
        "requests": [
          {
            "display_type": "line",
            "formulas": [
              {
                "formula": "query1"
              }
            ],
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.github.reverts.count{*}"
              }
            ],
            "response_format": "timeseries",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "markers": [
          {
            "label": "pass boundary",
            "value": "<= 1",
            "display_type": "ok"
          }
        ],
        "show_legend": false
      },
      "layout": {
        "x": 6,
        "y": 32,
        "width": 6,
        "height": 4
      }
    },
    {
      "definition": {
        "type": "timeseries",
        "title": "CI \u2014 CI smoothness \u2014 Pre-merge duration \u2014 P90 length (minutes) (Condition: < 5)",
        "requests": [
          {
            "display_type": "line",
            "formulas": [
              {
                "formula": "query1"
              }
            ],
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.ci.workflow.duration.p90{*}"
              }
            ],
            "response_format": "timeseries",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "markers": [
          {
            "label": "pass boundary",
            "value": "< 5",
            "display_type": "ok"
          },
          {
            "label": "warn",
            "value": "< 8",
            "display_type": "warning"
          }
        ],
        "show_legend": false
      },
      "layout": {
        "x": 0,
        "y": 36,
        "width": 6,
        "height": 4
      }
    },
    {
      "definition": {
        "type": "timeseries",
        "title": "CI \u2014 CI smoothness \u2014 Jobs cancelled \u2014 Cancellation count (Condition: < 10)",
        "requests": [
          {
            "display_type": "line",
            "formulas": [
              {
                "formula": "query1"
              }
            ],
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.ci.workflow.cancelled{*}"
              }
            ],
            "response_format": "timeseries",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "markers": [
          {
            "label": "pass boundary",
            "value": "< 10",
            "display_type": "ok"
          }
        ],
        "show_legend": false
      },
      "layout": {
        "x": 6,
        "y": 36,
        "width": 6,
        "height": 4
      }
    },
    {
      "definition": {
        "type": "timeseries",
        "title": "Eval \u2014 Eval data availability \u2014 Data availability \u2014 S3 eval artifacts found (Condition: < 1)",
        "requests": [
          {
            "display_type": "line",
            "formulas": [
              {
                "formula": "query1"
              }
            ],
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.eval.data_missing{*}"
              }
            ],
            "response_format": "timeseries",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "markers": [
          {
            "label": "pass boundary",
            "value": "< 1",
            "display_type": "ok"
          }
        ],
        "show_legend": false
      },
      "layout": {
        "x": 0,
        "y": 40,
        "width": 6,
        "height": 4
      }
    },
    {
      "definition": {
        "type": "timeseries",
        "title": "Eval \u2014 Remote eval \u2014 Local eval \u2014 Success signal (Condition: >= 1)",
        "requests": [
          {
            "display_type": "line",
            "formulas": [
              {
                "formula": "query1"
              }
            ],
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.eval.local.success{*}"
              }
            ],
            "response_format": "timeseries",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "markers": [
          {
            "label": "pass boundary",
            "value": ">= 1",
            "display_type": "ok"
          }
        ],
        "show_legend": false
      },
      "layout": {
        "x": 6,
        "y": 40,
        "width": 6,
        "height": 4
      }
    },
    {
      "definition": {
        "type": "timeseries",
        "title": "Eval \u2014 Remote eval \u2014 Local eval \u2014 Heart delta pct (Condition: >= 0)",
        "requests": [
          {
            "display_type": "line",
            "formulas": [
              {
                "formula": "query1"
              }
            ],
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.eval.local.heart_delta_pct{*}"
              }
            ],
            "response_format": "timeseries",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "markers": [
          {
            "label": "pass boundary",
            "value": ">= 0",
            "display_type": "ok"
          }
        ],
        "show_legend": false
      },
      "layout": {
        "x": 0,
        "y": 44,
        "width": 6,
        "height": 4
      }
    },
    {
      "definition": {
        "type": "timeseries",
        "title": "Eval \u2014 Remote eval \u2014 Remote eval \u2014 Success signal (Condition: >= 1)",
        "requests": [
          {
            "display_type": "line",
            "formulas": [
              {
                "formula": "query1"
              }
            ],
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.eval.remote.success{*}"
              }
            ],
            "response_format": "timeseries",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "markers": [
          {
            "label": "pass boundary",
            "value": ">= 1",
            "display_type": "ok"
          }
        ],
        "show_legend": false
      },
      "layout": {
        "x": 6,
        "y": 44,
        "width": 6,
        "height": 4
      }
    },
    {
      "definition": {
        "type": "timeseries",
        "title": "Eval \u2014 Remote eval \u2014 Remote eval \u2014 Heart delta pct (Condition: >= 0)",
        "requests": [
          {
            "display_type": "line",
            "formulas": [
              {
                "formula": "query1"
              }
            ],
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.eval.remote.heart_delta_pct{*}"
              }
            ],
            "response_format": "timeseries",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "markers": [
          {
            "label": "pass boundary",
            "value": ">= 0",
            "display_type": "ok"
          }
        ],
        "show_legend": false
      },
      "layout": {
        "x": 0,
        "y": 48,
        "width": 6,
        "height": 4
      }
    },
    {
      "definition": {
        "type": "timeseries",
        "title": "Eval \u2014 Remote eval \u2014 Remote eval \u2014 Runtime minutes (Condition: <= 60)",
        "requests": [
          {
            "display_type": "line",
            "formulas": [
              {
                "formula": "query1"
              }
            ],
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:metta.infra.cron.eval.remote.duration_minutes{*}"
              }
            ],
            "response_format": "timeseries",
            "style": {
              "palette": "dog_classic",
              "line_type": "solid",
              "line_width": "normal"
            }
          }
        ],
        "markers": [
          {
            "label": "pass boundary",
            "value": "<= 60",
            "display_type": "ok"
          },
          {
            "label": "warn",
            "value": "<= 90",
            "display_type": "warning"
          }
        ],
        "show_legend": false
      },
      "layout": {
        "x": 6,
        "y": 48,
        "width": 6,
        "height": 4
      }
    }
  ]
}
